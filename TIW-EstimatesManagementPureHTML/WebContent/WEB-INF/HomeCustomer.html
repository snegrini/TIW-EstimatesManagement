<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Customer page</title>
	<link rel="stylesheet" type="text/css" href="../css/default.css" th:href="@{/css/default.css}"/>
	<link rel="stylesheet" type="text/css" href="../css/homecustomer.css" th:href="@{/css/homecustomer.css}"/>
</head>
<body>
	<header class="headerrow">
		<div class="titlecolumn">
			<h1>Customer Page</h1>
			<h4>Welcome <span th:text="${session.user.username} + ' !'">MarioRossi</span></h4>
		</div>
		<div class="buttoncolumn">
			<a th:href="@{/Logout}">Logout</a>
		</div>
	</header>
	
	<br>

	<!-- div of priced order -->
	<div class="container">
		<div class="column column-40">
			<h4>Your estimates:</h4>
			<p th:if="${#lists.isEmpty(estimates)}" th:text="'You have no estimates.'"></p>
			<table th:unless="${#lists.isEmpty(estimates)}">
				<thead>
					<tr>
						<th>ID</th>
						<th>Product</th>
						<th>Price</th>
						<th>Details</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="e : ${estimates}" th:class="(${e.id} == ${selectedEstimate.id})? 'current'">
						<td th:text="${e.id}">5</td>
						<td >
							<span th:each="p : ${products}" th:if="${e.productId} == ${p.id}" th:text="${p.name}">Treno Suburbano S11</span>
						</td>
						<td><span th:text="${e.price}">15</span> <span>&euro;</span></td>
						<td><a href="" th:href="@{/HomeCustomer(estimateid=${e.id})}">Details</a></td>
					</tr>
				</tbody>
			</table>
			
			<div class="container">
				<div class="column column-25">
					<img id="id_productimage" style="width:100%; height: 200px;">
				</div>
				<div class="column column-45">
					<table id="id_estimate_details_table">
					  <tr>
					    <th>Employee:</th>
					    <td id="id_details_employeename">Luca Tony</td>
					  </tr>
					  <tr>
					    <th>Product ID:</th>
					    <td id="id_details_productid">5</td>
					  </tr>
					  <tr>
					    <th>Price:</th>
					    <td id="id_details_price">100 <span>€</span></td>
					  </tr>
					  <tr>
					    <th>Product name:</th>
					    <td id="id_details_productname">Treno Suburbano S4</td>
					  </tr>
					  <tr>
					    <th>Optional:</th>
						    <td>
								<ul id="id_details_optionals">	
								</ul>
							</td>
					  </tr>
					</table>
				</div>
		  	</div>
			
		</div>

		<!-- div of non-priced order -->
		<h4>Insert a new estimates:</h4>
		<form action="CreateEstimate" method="POST" class="column column-60">
		  <fieldset>
		    <legend>Select a product:</legend>
		    <div class="container">
		      <div class="column column-40">
		        <table>
		          <thead>
		            <tr>
		            	<th>ID</th>
		  				<th>Product</th>
		  			</tr>
		          </thead>
		          <tbody>
		  			<tr th:each="p : ${products}" th:class="(${p.id} == ${selectedProduct.id})? 'current'">
		  				<td>
		  					<span th:text="${p.id}"></span>
		  				</td>
		  				<td>
		  					<a th:href="@{/HomeCustomer(productid=${p.id})}"><span th:text="${p.name}"></span></a>
		  				</td>
		  			</tr>
		  		 </tbody>
		        </table>
		      </div>
		      <div class="column column-60">
		      <img class="productimg" alt="Product Img" src="https://dummyimage.com/250x250/000/ffffff.png&text=Product+Img"
		      		th:alt="${selectedProduct.name}" th:src="@{/images/{image}(image=${selectedProduct.image})}"/>
		        <h5>Select one or more options:</h5>
		        <input type="hidden" name="prdct" value="" th:value="${selectedProduct.id}">
		        
			        <ul th:remove="all-but-first" class="checkbox">
			          <li th:each="o : ${optionals}">
			            <input type="checkbox" name="option[]" value="id1" th:value="${o.id}">
		            	<span th:text="${o.name}">Optional 1</span>
		            	<span class="sale" th:if="${o.type == (@it.polimi.tiw.estimates.beans.OptionalType@SALE)}" th:class="sale">SALE!</span>
			          </li>
			          <li>
			            <input type="checkbox" name="option[]" th:value="id2">
		            	<span>Optional 2</span>
			          </li>
			          <li>
			            <input type="checkbox" name="option[]" th:value="id3">
		            	<span>Optional 3</span>
		            	<span class="sale">SALE!</span>
			          </li>
			        </ul>
			        
		        <br>
		        <input type="submit" value="Insert">
		        <p th:text=" ${errorMsg}"></p>
		      </div>
		    </div>    
		  </fieldset>
		</form>
	</div>

	<footer>
	  <p>Made with &#x1F4BB; ❤️️by Samuele Negrini, Aldo Plenzich, Mattia Sala</p>
	</footer>
</body>
</html>
